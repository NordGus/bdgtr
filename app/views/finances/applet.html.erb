<%# app/views/finances/applet.html.erb. %>
<%# This view is the base of Bdgtr's finances section. The client should interact with it using Turbo. %>
<div
  id="finances"
  class="
    flex-1 w-full max-w-[420px] md:max-h-[95vh]
    m-0 p-3 relative md:rounded-lg
    bg-neutral-100 dark:bg-neutral-800
    grid grid-rows-applet
  "
  data-controller="finances modal"
  data-action="finances--account-saved:success->finances#hideAccount"
>
  <div id="toasts" class="absolute flex flex-col justify-center items-center gap-2 z-50 top-0 w-full p-3"></div>
  <%= render partial: "layouts/modal" %>
  <div id="header" class="pb-3 pt-5 flex justify-between items-center">
    <div id="title" class="flex justify-end items-center">
      <a
        data-finances-target="back"
        class="py-2 px-3 mr-2 rounded-lg hidden cursor-pointer"
        data-action="click->finances#hideAccount"
      >
        <
      </a>
      <h1 class="text-3xl">Finances</h1>
    </div>
    <a
      data-finances-target="new"
      href="<%= new_finances_account_path %>"
      class="py-2 px-3 rounded-lg cursor-pointer"
      data-action="click->finances#displayAccount"
      data-turbo-frame="account"
    >
      Add
    </a>
    <a
      data-finances-target="save"
      class="py-2 px-3 rounded-lg hidden cursor-pointer"
      data-action="click->finances#saveAccount"
      data-turbo="true"
      data-turbo-frame="account"
    >
      Save
    </a>
  </div>

  <%=
    turbo_frame_tag :accounts,
                    src: finances_accounts_path,
                    loading: "lazy",
                    class: "overflow-auto",
                    data: { finances_target: "accounts" }
  %>

  <%= turbo_frame_tag :account, class: "overflow-auto hidden", data: { finances_target: "account" } %>

  <%= render partial: "layouts/menu" %>
</div>
